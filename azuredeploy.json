{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "resourcePrefix": {
            "type": "string",
            "metadata": {
                "description": "provide a 2-13 character prefix for all resources."
            }
        },
        "storageAccountName": {
            "type": "string",
            "metadata": {
                "description": "Specifies the name of the Azure Storage account."
            }
        },
        "containerName": {
            "type": "string",
            "defaultValue": "logs",
            "metadata": {
                "description": "Specifies the name of the blob container."
            }
        },
        "storageAccountType": {
            "type": "string",
            "defaultValue": "Standard_LRS",
            "allowedValues": [
                "Standard_LRS",
                "Standard_GRS",
                "Standard_ZRS",
                "Premium_LRS"
            ],
            "metadata": {
                "description": "Storage Account type"
            }
        },
        "hostingPlanSku": {
            "type": "string",
            "defaultValue": "F1",
            "allowedValues": [
                "F1",
                "D1",
                "B1",
                "B2",
                "B3",
                "S1",
                "S2",
                "S3",
                "P1",
                "P2",
                "P3",
                "P4"
            ],
            "metadata": {
                "description": "The pricing tier for the App Service plan"
            }
        },
        "searchServiceSku": {
            "type": "string",
            "defaultValue": "basic",
            "allowedValues": [
                "free",
                "basic",
                "standard",
                "standard2",
                "standard3"
            ],
            "metadata": {
                "description": "The SKU of the search service you want to create. E.g. free or standard"
            }
        },
        "searchServiceAndCognitiveServicesLocation": {
            "type": "string",
            "defaultValue": "South Central US",
            "allowedValues": [
                "East Asia",
                "Southeast Asia",
                "Australia East",
                "Brazil South",
                "Canada Central",
                "North Europe",
                "West Europe",
                "Central India",
                "UK South",
                "East US",
                "East US 2",
                "Central US",
                "North Central US",
                "South Central US",
                "West Central US",
                "West US",
                "West US 2",
                "Japan East",
                "Japan West",
                "Korea Central",
                "France Central"
            ],
            "metadata": {
                "description": "Location where the Azure Search service and Cognitive Services account will be deployed."
            }
        }
    },
    "variables": {
        "hostingPlanName": "[concat(parameters('resourcePrefix'), '-plan')]",
        "storageAccountName": "[concat(parameters('resourcePrefix'), 'storage')]",
        "websiteName": "[concat(parameters('resourcePrefix'), '-site')]",
        "appInsightsName": "[concat(parameters('resourcePrefix'), '-app-insights')]",
        "searchServiceName": "[concat(parameters('resourcePrefix'), '-search-service')]",
        "cognitiveServicesAccountName": "[concat(parameters('resourcePrefix'), '-cognitive-services')]",
        "functionAppName":"[concat(parameters('resourcePrefix'), '-function-app')]",
        "storageAccountId":"[concat(parameters('resourcePrefix'))]"
    },
    "resources": [
        {
            "name": "[parameters('storageAccountName')]",
            "type": "Microsoft.Storage/storageAccounts",
            "apiVersion": "2018-07-01",
            "location": "[resourceGroup().location]",
            "kind": "StorageV2",
            "sku": {
                "name": "[parameters('storageAccountType')]",
                "tier": "Standard"
            }
        }
    ]
}